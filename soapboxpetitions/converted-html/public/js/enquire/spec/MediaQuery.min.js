!function(e){"use strict";describe("MediaQuery",function(){var t,a,n;beforeEach(function(){a=new MediaQuery("((max-width:1000px))"),t=jasmine.createSpyObj("handler",["match","unmatch","setup"]),n=spyOn(e,"matchMedia")}),it("will add a media query listener when constructed",function(){var e,t=jasmine.createSpyObj("mql",["addListener"]);n.andReturn(t),e=new MediaQuery("(max-width: 1000px)"),expect(t.addListener).toHaveBeenCalledWith(e.listener)}),it("can accept new handlers",function(){var e=a.handlers.length;a.addHandler(t),expect(e).toBe(0),expect(a.handlers.length).toBe(1)}),it("will turn on handler when added if query is already matching",function(){n.andReturn({matches:!0,addListener:function(){}}),a=new MediaQuery("(max-width:1000px)"),a.addHandler(t),expect(t.match).toHaveBeenCalled()}),it("can remove handlers",function(){var n,d=jasmine.createSpyObj("handler",["match","unmatch"]),r=spyOn(Array.prototype,"splice").andCallThrough(),l=spyOn(e.QueryHandler.prototype,"equals").andCallThrough(),i=spyOn(e.QueryHandler.prototype,"destroy");a.addHandler(t),a.addHandler(d),n=a.handlers.length,a.removeHandler(t),expect(a.handlers.length).toBe(n-1),expect(l.calls.length).not.toBe(n),expect(i.calls.length).toBe(1),expect(r.calls.length).toBe(1)}),it("can be short-circuited with isUnconditional flag",function(){a.isUnconditional=!0,a.addHandler(t),expect(a.matches()).toBe(!0)}),it("destroys all handlers and removes listener when cleared",function(){var e=jasmine.createSpyObj("handler",["match","unmatch"]),t=jasmine.createSpyObj("handler",["match","destroy"]);a.mql=jasmine.createSpyObj("mql",["addListener","removeListener"]),a.addHandler(e),a.addHandler(t),a.clear(),expect(e.unmatch).toHaveBeenCalled(),expect(t.destroy).toHaveBeenCalled(),expect(a.mql.removeListener).toHaveBeenCalledWith(a.listener),expect(a.handlers.length).toBe(0)}),it("will consider a match if unconditional flag set or if media query matches",function(){var e,t;a.isUnconditional=!0,e=a.matches(),a.isUnconditional=!1,a.mql={matches:!0},t=a.matches(),expect(e).toBe(!0),expect(t).toBe(!0)})})}(this);