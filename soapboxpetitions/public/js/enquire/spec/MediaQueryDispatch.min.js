!function(e){"use strict";describe("MediaQueryDispatch",function(){var t="max-width:1000px";it("throws if matchMedia is not present",function(){var t=e.matchMedia;e.matchMedia=void 0,expect(function(){new MediaQueryDispatch}).toThrow("matchMedia not present, legacy browsers require a polyfill"),e.matchMedia=t}),it("tests for browser capability",function(){var t,r=!0;spyOn(e,"matchMedia").andReturn({matches:r}),t=new MediaQueryDispatch,expect(e.matchMedia).toHaveBeenCalled(),expect(t.browserIsIncapable).toBe(!r)}),it("allows a match function to be registered",function(){var e,r=new MediaQueryDispatch;r.register(t,function(){}),e=r.queries[t],expect(e).not.toBe(void 0),expect(e.handlers.length).toBe(1)}),it("allows handler objects to be registered",function(){var e,r=new MediaQueryDispatch;r.register(t,{}),e=r.queries[t],expect(e.handlers.length).toBe(1)}),it("allows arrays of handlers to be registered",function(){var e,r=new MediaQueryDispatch,a=[{},{},{}];r.register(t,a),e=r.queries[t],expect(e.handlers.length).toBe(a.length)}),it("allows multiple handlers for same query to be registered at different times",function(){var r=new MediaQueryDispatch,a=jasmine.createSpyObj("mediaQueryInstance",["addHandler"]),i=spyOn(e,"MediaQuery").andReturn(a);r.register(t,{}),r.register(t,{}),expect(i.calls.length).toBe(1),expect(a.addHandler.calls.length).toBe(2)}),it("allows entire queries to be unregistered",function(){var r=new MediaQueryDispatch,a=spyOn(e.QueryHandler.prototype,"destroy"),i=[jasmine.createSpyObj("handler1",["match"]),jasmine.createSpyObj("handler2",["match"])];r.register(t,i),r.unregister(t),expect(a.calls.length).toBe(i.length),expect(r.queries[t]).toBe(void 0)}),it("allows individual handlers to be unregistered",function(){var r=new MediaQueryDispatch,a=spyOn(e.MediaQuery.prototype,"removeHandler"),i=[jasmine.createSpyObj("handler1",["match"]),jasmine.createSpyObj("handler2",["match"])];r.register(t,i),r.unregister(t,i[1]),expect(a.calls.length).toBe(1)}),it("returns if unregistering unrecognised media query",function(){var r,a=new MediaQueryDispatch,i=spyOn(e.MediaQuery.prototype,"removeHandler"),n=spyOn(e.QueryHandler.prototype,"destroy"),s=jasmine.createSpyObj("handler1",["match"]);a.register(t,s),r=a.unregister("klgfjglkfdsajflkj",s),expect(i).not.toHaveBeenCalled(),expect(n).not.toHaveBeenCalled(),expect(r).toBe(a)})})}(this);