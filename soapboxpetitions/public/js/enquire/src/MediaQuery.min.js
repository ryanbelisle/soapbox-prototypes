function MediaQuery(e,s){this.query=e,this.isUnconditional=s,this.handlers=[],this.mql=matchMedia(e);var t=this;this.listener=function(e){t.mql=e,t.assess()},this.mql.addListener(this.listener)}MediaQuery.prototype={addHandler:function(e){var s=new QueryHandler(e);this.handlers.push(s),this.matches()&&s.on()},removeHandler:function(e){var s=this.handlers;each(s,function(t,n){return t.equals(e)?(t.destroy(),!s.splice(n,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){each(this.handlers,function(e){e.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";each(this.handlers,function(s){s[e]()})}};