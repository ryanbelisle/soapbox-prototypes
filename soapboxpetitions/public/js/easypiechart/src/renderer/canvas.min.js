var CanvasRenderer=function(e,t){var a,i=document.createElement("canvas");"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(i);var n=i.getContext("2d");i.width=i.height=t.size,e.appendChild(i);var o=1;window.devicePixelRatio>1&&(o=window.devicePixelRatio,i.style.width=i.style.height=[t.size,"px"].join(""),i.width=i.height=t.size*o,n.scale(o,o)),n.translate(t.size/2,t.size/2),n.rotate((-0.5+t.rotate/180)*Math.PI);var r=(t.size-t.lineWidth)/2;t.scaleColor&&t.scaleLength&&(r-=t.scaleLength+2),Date.now=Date.now||function(){return+new Date};var s=function(e,t,a){a=Math.min(Math.max(0,a||1),1),n.beginPath(),n.arc(0,0,r,0,2*Math.PI*a,!1),n.strokeStyle=e,n.lineWidth=t,n.stroke()},l=function(){var e,a,i=24;n.lineWidth=1,n.fillStyle=t.scaleColor,n.save();for(var i=24;i>0;--i)0===i%6?(a=t.scaleLength,e=0):(a=.6*t.scaleLength,e=t.scaleLength-a),n.fillRect(-t.size/2+e,0,a,1),n.rotate(Math.PI/12);n.restore()},c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),h=function(){t.scaleColor&&l(),t.trackColor&&s(t.trackColor,t.lineWidth)};this.clear=function(){n.clearRect(t.size/-2,t.size/-2,t.size,t.size)},this.draw=function(e){t.scaleColor||t.trackColor?n.getImageData&&n.putImageData?a?n.putImageData(a,0,0):(h(),a=n.getImageData(0,0,t.size*o,t.size*o)):(this.clear(),h()):this.clear(),n.lineCap=t.lineCap;var i;i="function"==typeof t.barColor?t.barColor(e):t.barColor,e>0&&s(i,t.lineWidth,e/100)}.bind(this),this.animate=function(e,a){var i=Date.now();t.onStart(e,a);var n=function(){var o=Math.min(Date.now()-i,t.animate),r=t.easing(this,o,e,a-e,t.animate);this.draw(r),t.onStep(e,a,r),o>=t.animate?t.onStop(e,a):c(n)}.bind(this);c(n)}.bind(this)};